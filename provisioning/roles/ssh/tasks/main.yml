---
    - name: Update SSH configuration and disable root login 
      lineinfile: >
        dest=/etc/ssh/sshd_config
        regexp="{{ item.regexp }}"
        line="{{ item.line }}"
        state=present
      with_items:
        - {
          regexp: "^PasswordAuthentication",
          line: "PasswordAuthentication no"
        }
        - {
          regexp: "^PermitRootLogin",
          line: "PermitRootLogin no"
        }
        -  {
          regexp: "^Port",
          line: "Port 2849"
        }
      notify: restart ssh